ef find_repository_name(start_dir="."):

    is_docker = os.environ.get("DOCKER_CONTAINER") == "TRUE"

    current_dir = os.path.abspath(start_dir)

    while current_dir != '/':  # Stop searching at the root directory
        for root, dirs, files in os.walk(current_dir):
            paths = [path for path in files if re.search("Snakefile|snakefile", path)]
            if paths:
               if is_docker == "TRUE": ## If the Snakefile is run inside a Docker container, then there will be only one Snakefile,	and therefore we can automatically identify it
                  return re.sub("/workflow/","", os.path.relpath(root, start=start_dir) )
	       else: ##	If the Snakefile is not	running	inside a Docker container, then
               	  return re.sub("/workflow/","", os.path(root, start=start_dir) )


        current_dir = os.path.dirname(current_dir)

    # Return None if no Snakefile or snakefile is found
    return None


def find_workflow_path():
  home_directory = os.path.expanduser("~")
  repository_name = find_repository_name(start_dir=".")
  result = subprocess.run(["find", home_directory, "-type", "d", "-name", repository_name ], capture_output=True, text=True)
  return result.stdout
